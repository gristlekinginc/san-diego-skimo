<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Action Journal</title>
    <link rel="stylesheet" href="assets/css/style.css">
</head>
<body>
    <!-- Navigation -->
    <header>
        <h1>Action Journal</h1>
        <nav>
            <ul class="nav-list">
                <li><a href="index.html">Home</a></li>
                <li><a href="action-journal.html">Action Journal</a></li>
                <li><a href="contact.html">Contact</a></li>
            </ul>
        </nav>
    </header>

    <!-- Main Content -->
    <main>
        <h2>Here are the latest workouts recorded in uphill skiing mecca San Diego</h2>
        <div class="post-container" id="post-container"></div>
        <div class="pagination" id="pagination">
            <button id="prev" disabled>Previous</button>
            <span id="page-info"></span>
            <button id="next">Next</button>
        </div>
    </main>

    <!-- Footer -->
    <footer>
        <p>&copy; 2024 San Diego Skimo Community</p>
    </footer>

    <!-- Include the marked.js library -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script>
    async function loadPosts() {
        const container = document.getElementById("post-container");
        const response = await fetch("posts/index.json");

        if (!response.ok) {
            console.error("Failed to load posts");
            return;
        }

        const posts = await response.json();

        // Paginate: 5 posts per page
        const params = new URLSearchParams(window.location.search);
        const page = parseInt(params.get("page") || 1);
        const postsPerPage = 5;
        const start = (page - 1) * postsPerPage;
        const end = start + postsPerPage;
        const paginatedPosts = posts.slice(start, end);

        // Clear and render posts
        container.innerHTML = "";
        paginatedPosts.forEach(post => {
            const postHTML = `
                <div class="post">
                    <h2>${post.title}</h2>
                    <p>Date: ${post.date}</p>
                    <a href="posts/${post.filename}" target="_blank">Read more</a>
                </div>
            `;
            container.insertAdjacentHTML('beforeend', postHTML);
        });

        // Pagination Controls
        const totalPages = Math.ceil(posts.length / postsPerPage);
        const paginationHTML = `
            <div class="pagination">
                ${page > 1 ? `<a href="?page=${page - 1}">Previous</a>` : ''}
                ${page < totalPages ? `<a href="?page=${page + 1}">Next</a>` : ''}
            </div>
        `;
        container.insertAdjacentHTML('beforeend', paginationHTML);
    }

    loadPosts();
</script>

</body>
</html>
